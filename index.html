<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<title>ManGaLearn</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Noto+Sans+SC&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>

<body>

<div id="ink"></div>

<header>
  <div class="header-left">
    <a href="index.html" class="logo-link">
      <img src="logo.png" class="logo" alt="ManGaLearn Logo">
    </a>
    <span class="site-title">ManGaLearn</span>
  </div>

  <nav class="nav">
    <a href="#">Home</a>
    <a href="#">Lessons</a>
    <a href="#">About</a>
  </nav>

  <button id="themeToggle" class="theme-toggle">ðŸŒ™</button>
</header>

<!-- WORD TEXT -->
<div class="manga-text">
  <span class="word" data-pinyin="NÇ hÇŽo" data-meaning="Ð¡Ð°Ð¹Ð½ ÑƒÑƒ">ä½ å¥½</span>
  <span class="word" data-pinyin="WÇ’men" data-meaning="Ð‘Ð¸Ð´">æˆ‘ä»¬</span>
  <span class="word" data-pinyin="YÃ¬qÇ" data-meaning="Ð¥Ð°Ð¼Ñ‚Ð´Ð°Ð°">ä¸€èµ·</span>
  <span class="word" data-pinyin="XuÃ©xÃ­" data-meaning="Ð¡ÑƒÑ€Ð°Ð»Ñ†ÑŠÑ">å­¦ä¹ </span>
  <span class="word" data-pinyin="ZhÅngwÃ©n" data-meaning="Ð¥ÑÑ‚Ð°Ð´ Ñ…ÑÐ»">ä¸­æ–‡</span>
</div>

<div id="tooltip" class="tooltip"></div>

<!-- PANELS -->
<div class="manga-panel-wrapper" id="panelWrapper">
  <div class="manga-panel">Lesson 1</div>
  <div class="manga-panel">Lesson 2</div>
  <div class="manga-panel">Lesson 3</div>
</div>

<footer>
  &copy; 2026 ManGaLearn. All Rights Reserved.
</footer>

<script>
document.addEventListener("DOMContentLoaded", ()=>{

  /* SOUND ENGINE */
  const AudioCtx = window.AudioContext || window.webkitAudioContext;
  const audioCtx = new AudioCtx();
  function uiSound(freq=400, vol=0.05) {
    if (audioCtx.state === "suspended") audioCtx.resume();
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.connect(g); g.connect(audioCtx.destination);
    o.frequency.value = freq; g.gain.value = vol;
    g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.12);
    o.start(); o.stop(audioCtx.currentTime + 0.12);
  }

  /* WORD CLICK â†’ TOOLTIP + VOICE */
  const tooltip = document.getElementById("tooltip");
  let activeWord = null;

  document.querySelectorAll(".word").forEach(word=>{
    word.addEventListener("click", e=>{
      uiSound(600);

      if(activeWord===word){
        tooltip.classList.remove("show");
        word.classList.remove("active");
        activeWord=null;
        return;
      }

      document.querySelectorAll(".word").forEach(w=>w.classList.remove("active"));
      word.classList.add("active");

      tooltip.textContent = `${word.dataset.pinyin} â€” ${word.dataset.meaning}`;
      tooltip.style.left = e.clientX + "px";
      tooltip.style.top = e.clientY - 30 + "px";
      tooltip.classList.add("show");

      activeWord = word;

      const utter = new SpeechSynthesisUtterance(word.textContent);
      utter.lang = "zh-CN";
      speechSynthesis.cancel();
      speechSynthesis.speak(utter);
    });
  });

  /* PANELS SWIPE */
  const wrapper = document.getElementById("panelWrapper");
  let startX=0, currentX=0, velocity=0, dragging=false;

  wrapper.addEventListener("touchstart", e=>{
    startX=e.touches[0].clientX;
    dragging=true;
  });
  wrapper.addEventListener("touchmove", e=>{
    if(!dragging) return;
    currentX=e.touches[0].clientX;
    velocity=currentX-startX;
    wrapper.style.transform=`translateX(${velocity}px)`;
  });
  wrapper.addEventListener("touchend", ()=>{
    dragging=false;
    wrapper.style.transition="transform 0.4s ease-out";
    wrapper.style.transform=`translateX(${velocity*0.3}px)`;
    setTimeout(()=>{
      wrapper.style.transition="";
      wrapper.style.transform="";
    }, 400);
  });

  /* DARK/LIGHT THEME + INK TRANSITION */
  const ink=document.getElementById("ink");
  document.getElementById("themeToggle").onclick = ()=>{
    ink.classList.add("show");
    setTimeout(()=>{
      document.body.classList.toggle("light");
      ink.classList.remove("show");
    }, 300);
  };

});
</script>

</body>
</html>
